<div [@routerTransition]>
    <app-page-header [heading]="'Creación de usuario'" [icon]="'fa-user'"></app-page-header>
    <div class="row">
        <div class="col-md-12">
            <h3>Usuarios</h3>
            <form role="form">
                <div class="row">
                    <div class="col-md-4">
                        <label for="Email" class="control-label">E-mail</label>
                        <input type="email" name="_emailUser" [(ngModel)]="userData._emailUser" class="form-control" placeholder="Introduce tu e-mail" required>
                    </div>
                    <div class="col-md-4">
                        <label for="Usuario" class="control-label">Usuario</label>
                        <input type="text" name="_usernameUser" [(ngModel)]="userData._usernameUser" class="form-control" placeholder="Introduce tu usuario" required>
                    </div>
                    <div class="col-md-4">
                        <label for="Rol">Rol del usuario</label>
                        <select name="_typeUser" [(ngModel)]="userData._typeUser" class="form-control">
                            <option *ngIf="user._typeUser == 1; then hide else show" value="1">Superusuario</option>
                            <option *ngIf="user._typeUser == 1; then hide else show" value="2">Administrador</option>
                            <option value="3">Creador</option>
                            <option value="4">Aprobador</option>
                            <option value="5">Consultor</option>
                        </select>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <label for="Birtday" class="control-label">Fecha de nacimiento</label>
                        <input type="date" name="_birthdateUser" [(ngModel)]="userData._birthdateUser" class="form-control" placeholder="Introduce tu fecha de nacimiento" required>
                    </div>
                    <div class="col-md-4">
                        <label for="País" class="control-label">País</label>
                        <input type="text" name="_countryUser" [(ngModel)]="userData._countryUser" class="form-control" placeholder="Introduce tu país" required>
                    </div>
                    <div class="col-md-4">
                        <label for="Ciudad" class="control-label">Ciudad</label>
                        <input type="text" name="_cityUser" [(ngModel)]="userData._cityUser" class="form-control" placeholder="Introduce tu ciudad" required>
                    </div>
                    
                </div>
                <div class="row">
                    <div class="col-md-4">
                        <label for="Teléfono" class="control-label">Teléfono local</label>
                        <input type="number" name="_phoneUser" [(ngModel)]="userData._phoneUser" class="form-control" placeholder="Introduce tu teléfono" required>
                    </div>
                    <div class="col-md-4">
                        <label for="Sexo">Sexo</label>
                        <select name="_genderUser" [(ngModel)]="userData._genderUser" class="form-control">
                            <!--Corregir el value de ambas opciones-->
                            <option value="M" >Masculino</option>
                            <option value="F" >Femenino</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label for="Dirección" class="control-label">Dirección</label>
                        <input type="text" name="_addressUser" [(ngModel)]="userData._addressUser" class="form-control" placeholder="Introduce tu dirección" required>
                    </div>
                </div>
                <div class="row">
                        <div class="col-md-6">
                                <label for="Contraseña" class="control'label">Contraseña</label>
                                <input type="password" name="userData._passwordUser" [(ngModel)]="userData._passwordUser" class="form-control">
                            </div>
                    <div class="col-md-6">
                        <label for="Compañia" class="control-label">Compañía</label>
                        <select class="form-control" name="userData._companyUser" [(ngModel)]="userData._companyUser">
                            <option *ngFor=" let company of companies " value="{{ company._idCompany }}">{{ company._name }}</option>
                        </select>
                    </div>
                </div>
                <br>
                <div class="row">
                    <div class="col-md-12">
                        <button class="btn btn-lg btn-success" (click)="handleAdd()" style="float:right;">Crear usuario</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <br>
    <br>
    <div class="row">
        <div class="col-md-12">
            <div class="card-body table-responsive">
                <table class="table">
                    <thead>
                    <tr>
                        <th>Email</th>
                        <th>Nombre</th>
                        <th>Apellido</th>
                        <th>User</th>
                        <th>Rol</th>
                        <th>Sexo</th>
                        <th>Télefono</th>
                        <th>Fecha de nacimiento</th>
                        <th>País</th>
                        <th>Ciudad</th>
                        <th>Dirección</th>
                    </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let User of users">
                            <div>
                                <td>{{ User._emailUser }}</td>
                                <td>{{ User._usernameUser }}</td>
                                <td>{{ User._typeUser }}</td>
                                <td>{{ User._genderUser }}</td>
                                <td>{{ User._phoneUser }}</td>
                                <td>{{ User._dateOfBirthUser }}</td>
                                <td>{{ User._countryUser }}</td>
                                <td>{{ User._cityUser }}</td>
                                <td>{{ User._addressUser }}</td>
                                <td><button class="btn btn-primary" (click)="editUser(user._idUser)">Editar</button></td>
                            </div>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>